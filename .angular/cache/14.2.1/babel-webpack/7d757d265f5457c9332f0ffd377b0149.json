{"ast":null,"code":"\"use strict\";\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.object.define-property.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.array.filter.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.array.from.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.string.iterator.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.array.map.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.array.sort.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.number.constructor.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.array.for-each.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.function.name.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.array.find-index.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.object.assign.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.tab = tab;\n\nvar _dom = require(\"@testing-library/dom\");\n\nvar _utils = require(\"./utils\");\n\nvar _focus = require(\"./focus\");\n\nvar _blur = require(\"./blur\");\n\nfunction getNextElement(currentIndex, shift, elements, focusTrap) {\n  if ((0, _utils.isDocument)(focusTrap) && (currentIndex === 0 && shift || currentIndex === elements.length - 1 && !shift)) {\n    return focusTrap.body;\n  }\n\n  var nextIndex = shift ? currentIndex - 1 : currentIndex + 1;\n  var defaultIndex = shift ? elements.length - 1 : 0;\n  return elements[nextIndex] || elements[defaultIndex];\n}\n\nfunction tab() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$shift = _ref.shift,\n      shift = _ref$shift === void 0 ? false : _ref$shift,\n      focusTrap = _ref.focusTrap;\n\n  var _focusTrap$ownerDocum, _focusTrap;\n\n  var doc = (_focusTrap$ownerDocum = (_focusTrap = focusTrap) == null ? void 0 : _focusTrap.ownerDocument) != null ? _focusTrap$ownerDocum : document;\n  var previousElement = (0, _utils.getActiveElement)(doc);\n\n  if (!focusTrap) {\n    focusTrap = doc;\n  }\n\n  var focusableElements = focusTrap.querySelectorAll(_utils.FOCUSABLE_SELECTOR);\n  var enabledElements = Array.from(focusableElements).filter(function (el) {\n    return el === previousElement || el.getAttribute('tabindex') !== '-1' && !(0, _utils.isDisabled)(el) && // Hidden elements are not tabable\n    (0, _utils.isVisible)(el);\n  });\n  if (enabledElements.length === 0) return;\n  var orderedElements = enabledElements.map(function (el, idx) {\n    return {\n      el: el,\n      idx: idx\n    };\n  }).sort(function (a, b) {\n    // tabindex has no effect if the active element has tabindex=\"-1\"\n    if (previousElement && previousElement.getAttribute('tabindex') === '-1') {\n      return a.idx - b.idx;\n    }\n\n    var tabIndexA = Number(a.el.getAttribute('tabindex'));\n    var tabIndexB = Number(b.el.getAttribute('tabindex'));\n    var diff = tabIndexA - tabIndexB;\n    return diff === 0 ? a.idx - b.idx : diff;\n  }).map(function (_ref2) {\n    var el = _ref2.el;\n    return el;\n  }); // TODO: verify/remove type casts\n\n  var checkedRadio = {};\n  var prunedElements = [];\n  orderedElements.forEach(function (currentElement) {\n    // For radio groups keep only the active radio\n    // If there is no active radio, keep only the checked radio\n    // If there is no checked radio, treat like everything else\n    var el = currentElement;\n\n    if (el.type === 'radio' && el.name) {\n      // If the active element is part of the group, add only that\n      var prev = previousElement;\n\n      if (prev && prev.type === el.type && prev.name === el.name) {\n        if (el === prev) {\n          prunedElements.push(el);\n        }\n\n        return;\n      } // If we stumble upon a checked radio, remove the others\n\n\n      if (el.checked) {\n        prunedElements = prunedElements.filter(function (e) {\n          return e.type !== el.type || e.name !== el.name;\n        });\n        prunedElements.push(el);\n        checkedRadio[el.name] = el;\n        return;\n      } // If we already found the checked one, skip\n\n\n      if (typeof checkedRadio[el.name] !== 'undefined') {\n        return;\n      }\n    }\n\n    prunedElements.push(el);\n  });\n  var index = prunedElements.findIndex(function (el) {\n    return el === previousElement;\n  });\n  var nextElement = getNextElement(index, shift, prunedElements, focusTrap);\n  var shiftKeyInit = {\n    key: 'Shift',\n    keyCode: 16,\n    shiftKey: true\n  };\n  var tabKeyInit = {\n    key: 'Tab',\n    keyCode: 9,\n    shiftKey: shift\n  };\n  var continueToTab = true; // not sure how to make it so there's no previous element...\n  // istanbul ignore else\n\n  if (previousElement) {\n    // preventDefault on the shift key makes no difference\n    if (shift) _dom.fireEvent.keyDown(previousElement, Object.assign({}, shiftKeyInit));\n    continueToTab = _dom.fireEvent.keyDown(previousElement, Object.assign({}, tabKeyInit));\n  }\n\n  var keyUpTarget = !continueToTab && previousElement ? previousElement : nextElement;\n\n  if (continueToTab) {\n    if (nextElement === doc.body) {\n      /* istanbul ignore else */\n      if (previousElement) {\n        (0, _blur.blur)(previousElement);\n      }\n    } else {\n      (0, _focus.focus)(nextElement);\n    }\n  }\n\n  _dom.fireEvent.keyUp(keyUpTarget, Object.assign({}, tabKeyInit));\n\n  if (shift) {\n    _dom.fireEvent.keyUp(keyUpTarget, Object.assign({}, shiftKeyInit, {\n      shiftKey: false\n    }));\n  }\n}\n/*\neslint\n  complexity: \"off\",\n  max-statements: \"off\",\n*/","map":{"version":3,"mappings":"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","names":["Object","defineProperty","exports","value","tab","_dom","require","_utils","_focus","_blur","getNextElement","currentIndex","shift","elements","focusTrap","isDocument","length","body","nextIndex","defaultIndex","_focusTrap$ownerDocum","_focusTrap","doc","ownerDocument","document","previousElement","getActiveElement","focusableElements","querySelectorAll","FOCUSABLE_SELECTOR","enabledElements","Array","from","filter","el","getAttribute","isDisabled","isVisible","orderedElements","map","idx","sort","a","b","tabIndexA","Number","tabIndexB","diff","checkedRadio","prunedElements","forEach","currentElement","type","name","prev","push","checked","e","index","findIndex","nextElement","shiftKeyInit","key","keyCode","shiftKey","tabKeyInit","continueToTab","fireEvent","keyDown","keyUpTarget","blur","focus","keyUp"],"sources":["/Users/ilze/Documents/git/ng-iz/node_modules/@testing-library/user-event/dist/tab.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.tab = tab;\n\nvar _dom = require(\"@testing-library/dom\");\n\nvar _utils = require(\"./utils\");\n\nvar _focus = require(\"./focus\");\n\nvar _blur = require(\"./blur\");\n\nfunction getNextElement(currentIndex, shift, elements, focusTrap) {\n  if ((0, _utils.isDocument)(focusTrap) && (currentIndex === 0 && shift || currentIndex === elements.length - 1 && !shift)) {\n    return focusTrap.body;\n  }\n\n  const nextIndex = shift ? currentIndex - 1 : currentIndex + 1;\n  const defaultIndex = shift ? elements.length - 1 : 0;\n  return elements[nextIndex] || elements[defaultIndex];\n}\n\nfunction tab({\n  shift = false,\n  focusTrap\n} = {}) {\n  var _focusTrap$ownerDocum, _focusTrap;\n\n  const doc = (_focusTrap$ownerDocum = (_focusTrap = focusTrap) == null ? void 0 : _focusTrap.ownerDocument) != null ? _focusTrap$ownerDocum : document;\n  const previousElement = (0, _utils.getActiveElement)(doc);\n\n  if (!focusTrap) {\n    focusTrap = doc;\n  }\n\n  const focusableElements = focusTrap.querySelectorAll(_utils.FOCUSABLE_SELECTOR);\n  const enabledElements = Array.from(focusableElements).filter(el => el === previousElement || el.getAttribute('tabindex') !== '-1' && !(0, _utils.isDisabled)(el) && // Hidden elements are not tabable\n  (0, _utils.isVisible)(el));\n  if (enabledElements.length === 0) return;\n  const orderedElements = enabledElements.map((el, idx) => ({\n    el,\n    idx\n  })).sort((a, b) => {\n    // tabindex has no effect if the active element has tabindex=\"-1\"\n    if (previousElement && previousElement.getAttribute('tabindex') === '-1') {\n      return a.idx - b.idx;\n    }\n\n    const tabIndexA = Number(a.el.getAttribute('tabindex'));\n    const tabIndexB = Number(b.el.getAttribute('tabindex'));\n    const diff = tabIndexA - tabIndexB;\n    return diff === 0 ? a.idx - b.idx : diff;\n  }).map(({\n    el\n  }) => el); // TODO: verify/remove type casts\n\n  const checkedRadio = {};\n  let prunedElements = [];\n  orderedElements.forEach(currentElement => {\n    // For radio groups keep only the active radio\n    // If there is no active radio, keep only the checked radio\n    // If there is no checked radio, treat like everything else\n    const el = currentElement;\n\n    if (el.type === 'radio' && el.name) {\n      // If the active element is part of the group, add only that\n      const prev = previousElement;\n\n      if (prev && prev.type === el.type && prev.name === el.name) {\n        if (el === prev) {\n          prunedElements.push(el);\n        }\n\n        return;\n      } // If we stumble upon a checked radio, remove the others\n\n\n      if (el.checked) {\n        prunedElements = prunedElements.filter(e => e.type !== el.type || e.name !== el.name);\n        prunedElements.push(el);\n        checkedRadio[el.name] = el;\n        return;\n      } // If we already found the checked one, skip\n\n\n      if (typeof checkedRadio[el.name] !== 'undefined') {\n        return;\n      }\n    }\n\n    prunedElements.push(el);\n  });\n  const index = prunedElements.findIndex(el => el === previousElement);\n  const nextElement = getNextElement(index, shift, prunedElements, focusTrap);\n  const shiftKeyInit = {\n    key: 'Shift',\n    keyCode: 16,\n    shiftKey: true\n  };\n  const tabKeyInit = {\n    key: 'Tab',\n    keyCode: 9,\n    shiftKey: shift\n  };\n  let continueToTab = true; // not sure how to make it so there's no previous element...\n  // istanbul ignore else\n\n  if (previousElement) {\n    // preventDefault on the shift key makes no difference\n    if (shift) _dom.fireEvent.keyDown(previousElement, { ...shiftKeyInit\n    });\n    continueToTab = _dom.fireEvent.keyDown(previousElement, { ...tabKeyInit\n    });\n  }\n\n  const keyUpTarget = !continueToTab && previousElement ? previousElement : nextElement;\n\n  if (continueToTab) {\n    if (nextElement === doc.body) {\n      /* istanbul ignore else */\n      if (previousElement) {\n        (0, _blur.blur)(previousElement);\n      }\n    } else {\n      (0, _focus.focus)(nextElement);\n    }\n  }\n\n  _dom.fireEvent.keyUp(keyUpTarget, { ...tabKeyInit\n  });\n\n  if (shift) {\n    _dom.fireEvent.keyUp(keyUpTarget, { ...shiftKeyInit,\n      shiftKey: false\n    });\n  }\n}\n/*\neslint\n  complexity: \"off\",\n  max-statements: \"off\",\n*/"]},"metadata":{},"sourceType":"script"}