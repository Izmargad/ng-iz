{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"/Users/ilze/Documents/git/ng-iz/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (e) {\n          throw e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (e) {\n      didErr = true;\n      err = e;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.object.define-property.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.weak-map.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.object.to-string.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.string.iterator.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.array.iterator.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.promise.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.string.repeat.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.array.find.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.array.slice.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.array.filter.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.function.name.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.array.from.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.symbol.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.symbol.description.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.symbol.iterator.js\");\n\nrequire(\"/Users/ilze/Documents/git/ng-iz/node_modules/core-js/modules/es.array.is-array.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.keyboardImplementation = keyboardImplementation;\nexports.releaseAllKeys = releaseAllKeys;\n\nvar _dom = require(\"@testing-library/dom\");\n\nvar _utils = require(\"../utils\");\n\nvar _getNextKeyDef = require(\"./getNextKeyDef\");\n\nvar plugins = _interopRequireWildcard(require(\"./plugins\"));\n\nvar _getEventProps = require(\"./getEventProps\");\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction keyboardImplementation(_x, _x2, _x3) {\n  return _keyboardImplementation.apply(this, arguments);\n}\n\nfunction _keyboardImplementation() {\n  _keyboardImplementation = _asyncToGenerator(function* (text, options, state) {\n    var _state$repeatKey;\n\n    var document = options.document;\n\n    var getCurrentElement = function () {\n      return getActive(document);\n    };\n\n    var _ref = (_state$repeatKey = state.repeatKey) != null ? _state$repeatKey : (0, _getNextKeyDef.getNextKeyDef)(text, options),\n        keyDef = _ref.keyDef,\n        consumedLength = _ref.consumedLength,\n        releasePrevious = _ref.releasePrevious,\n        releaseSelf = _ref.releaseSelf,\n        repeat = _ref.repeat;\n\n    var replace = applyPlugins(plugins.replaceBehavior, keyDef, getCurrentElement(), options, state);\n\n    if (!replace) {\n      var pressed = state.pressed.find(function (p) {\n        return p.keyDef === keyDef;\n      }); // Release the key automatically if it was pressed before.\n      // Do not release the key on iterations on `state.repeatKey`.\n\n      if (pressed && !state.repeatKey) {\n        keyup(keyDef, getCurrentElement, options, state, pressed.unpreventedDefault);\n      }\n\n      if (!releasePrevious) {\n        var unpreventedDefault = keydown(keyDef, getCurrentElement, options, state);\n\n        if (unpreventedDefault && hasKeyPress(keyDef, state)) {\n          keypress(keyDef, getCurrentElement, options, state);\n        } // Release the key only on the last iteration on `state.repeatKey`.\n\n\n        if (releaseSelf && repeat <= 1) {\n          keyup(keyDef, getCurrentElement, options, state, unpreventedDefault);\n        }\n      }\n    }\n\n    if (repeat > 1) {\n      state.repeatKey = {\n        // don't consume again on the next iteration\n        consumedLength: 0,\n        keyDef: keyDef,\n        releasePrevious: releasePrevious,\n        releaseSelf: releaseSelf,\n        repeat: repeat - 1\n      };\n    } else {\n      delete state.repeatKey;\n    }\n\n    if (text.length > consumedLength || repeat > 1) {\n      if (options.delay > 0) {\n        yield (0, _utils.wait)(options.delay);\n      }\n\n      return keyboardImplementation(text.slice(consumedLength), options, state);\n    }\n\n    return void undefined;\n  });\n  return _keyboardImplementation.apply(this, arguments);\n}\n\nfunction getActive(document) {\n  var _getActiveElement;\n\n  return (_getActiveElement = (0, _utils.getActiveElement)(document)) != null ? _getActiveElement :\n  /* istanbul ignore next */\n  document.body;\n}\n\nfunction releaseAllKeys(options, state) {\n  var getCurrentElement = function () {\n    return getActive(options.document);\n  };\n\n  var _iterator = _createForOfIteratorHelper(state.pressed),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var k = _step.value;\n      keyup(k.keyDef, getCurrentElement, options, state, k.unpreventedDefault);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n}\n\nfunction keydown(keyDef, getCurrentElement, options, state) {\n  var element = getCurrentElement(); // clear carried characters when focus is moved\n\n  if (element !== state.activeElement) {\n    state.carryValue = undefined;\n    state.carryChar = '';\n  }\n\n  state.activeElement = element;\n  applyPlugins(plugins.preKeydownBehavior, keyDef, element, options, state);\n\n  var unpreventedDefault = _dom.fireEvent.keyDown(element, (0, _getEventProps.getKeyEventProps)(keyDef, state));\n\n  state.pressed.push({\n    keyDef: keyDef,\n    unpreventedDefault: unpreventedDefault\n  });\n\n  if (unpreventedDefault) {\n    // all default behavior like keypress/submit etc is applied to the currentElement\n    applyPlugins(plugins.keydownBehavior, keyDef, getCurrentElement(), options, state);\n  }\n\n  return unpreventedDefault;\n}\n\nfunction keypress(keyDef, getCurrentElement, options, state) {\n  var element = getCurrentElement();\n\n  var unpreventedDefault = _dom.fireEvent.keyPress(element, (0, _getEventProps.getKeyEventProps)(keyDef, state));\n\n  if (unpreventedDefault) {\n    applyPlugins(plugins.keypressBehavior, keyDef, getCurrentElement(), options, state);\n  }\n}\n\nfunction keyup(keyDef, getCurrentElement, options, state, unprevented) {\n  var element = getCurrentElement();\n  applyPlugins(plugins.preKeyupBehavior, keyDef, element, options, state);\n\n  var unpreventedDefault = _dom.fireEvent.keyUp(element, (0, _getEventProps.getKeyEventProps)(keyDef, state));\n\n  if (unprevented && unpreventedDefault) {\n    applyPlugins(plugins.keyupBehavior, keyDef, getCurrentElement(), options, state);\n  }\n\n  state.pressed = state.pressed.filter(function (k) {\n    return k.keyDef !== keyDef;\n  });\n  applyPlugins(plugins.postKeyupBehavior, keyDef, element, options, state);\n}\n\nfunction applyPlugins(pluginCollection, keyDef, element, options, state) {\n  var plugin = pluginCollection.find(function (p) {\n    return p.matches(keyDef, element, options, state);\n  });\n\n  if (plugin) {\n    plugin.handle(keyDef, element, options, state);\n  }\n\n  return !!plugin;\n}\n\nfunction hasKeyPress(keyDef, state) {\n  var _keyDef$key;\n\n  return (((_keyDef$key = keyDef.key) == null ? void 0 : _keyDef$key.length) === 1 || keyDef.key === 'Enter') && !state.modifiers.ctrl && !state.modifiers.alt;\n}","map":{"version":3,"mappings":"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","names":["Object","defineProperty","exports","value","keyboardImplementation","releaseAllKeys","_dom","require","_utils","_getNextKeyDef","plugins","_interopRequireWildcard","_getEventProps","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","text","options","state","_state$repeatKey","document","getCurrentElement","getActive","repeatKey","getNextKeyDef","keyDef","consumedLength","releasePrevious","releaseSelf","repeat","replace","applyPlugins","replaceBehavior","pressed","find","p","keyup","unpreventedDefault","keydown","hasKeyPress","keypress","length","delay","wait","slice","undefined","_getActiveElement","getActiveElement","body","k","_iterator","element","activeElement","carryValue","carryChar","preKeydownBehavior","fireEvent","keyDown","getKeyEventProps","push","keydownBehavior","keyPress","keypressBehavior","unprevented","preKeyupBehavior","keyUp","keyupBehavior","filter","postKeyupBehavior","pluginCollection","plugin","matches","handle","_keyDef$key","modifiers","ctrl","alt"],"sources":["/Users/ilze/Documents/git/ng-iz/node_modules/@testing-library/user-event/dist/keyboard/keyboardImplementation.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.keyboardImplementation = keyboardImplementation;\nexports.releaseAllKeys = releaseAllKeys;\n\nvar _dom = require(\"@testing-library/dom\");\n\nvar _utils = require(\"../utils\");\n\nvar _getNextKeyDef = require(\"./getNextKeyDef\");\n\nvar plugins = _interopRequireWildcard(require(\"./plugins\"));\n\nvar _getEventProps = require(\"./getEventProps\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nasync function keyboardImplementation(text, options, state) {\n  var _state$repeatKey;\n\n  const {\n    document\n  } = options;\n\n  const getCurrentElement = () => getActive(document);\n\n  const {\n    keyDef,\n    consumedLength,\n    releasePrevious,\n    releaseSelf,\n    repeat\n  } = (_state$repeatKey = state.repeatKey) != null ? _state$repeatKey : (0, _getNextKeyDef.getNextKeyDef)(text, options);\n  const replace = applyPlugins(plugins.replaceBehavior, keyDef, getCurrentElement(), options, state);\n\n  if (!replace) {\n    const pressed = state.pressed.find(p => p.keyDef === keyDef); // Release the key automatically if it was pressed before.\n    // Do not release the key on iterations on `state.repeatKey`.\n\n    if (pressed && !state.repeatKey) {\n      keyup(keyDef, getCurrentElement, options, state, pressed.unpreventedDefault);\n    }\n\n    if (!releasePrevious) {\n      const unpreventedDefault = keydown(keyDef, getCurrentElement, options, state);\n\n      if (unpreventedDefault && hasKeyPress(keyDef, state)) {\n        keypress(keyDef, getCurrentElement, options, state);\n      } // Release the key only on the last iteration on `state.repeatKey`.\n\n\n      if (releaseSelf && repeat <= 1) {\n        keyup(keyDef, getCurrentElement, options, state, unpreventedDefault);\n      }\n    }\n  }\n\n  if (repeat > 1) {\n    state.repeatKey = {\n      // don't consume again on the next iteration\n      consumedLength: 0,\n      keyDef,\n      releasePrevious,\n      releaseSelf,\n      repeat: repeat - 1\n    };\n  } else {\n    delete state.repeatKey;\n  }\n\n  if (text.length > consumedLength || repeat > 1) {\n    if (options.delay > 0) {\n      await (0, _utils.wait)(options.delay);\n    }\n\n    return keyboardImplementation(text.slice(consumedLength), options, state);\n  }\n\n  return void undefined;\n}\n\nfunction getActive(document) {\n  var _getActiveElement;\n\n  return (_getActiveElement = (0, _utils.getActiveElement)(document)) != null ? _getActiveElement :\n  /* istanbul ignore next */\n  document.body;\n}\n\nfunction releaseAllKeys(options, state) {\n  const getCurrentElement = () => getActive(options.document);\n\n  for (const k of state.pressed) {\n    keyup(k.keyDef, getCurrentElement, options, state, k.unpreventedDefault);\n  }\n}\n\nfunction keydown(keyDef, getCurrentElement, options, state) {\n  const element = getCurrentElement(); // clear carried characters when focus is moved\n\n  if (element !== state.activeElement) {\n    state.carryValue = undefined;\n    state.carryChar = '';\n  }\n\n  state.activeElement = element;\n  applyPlugins(plugins.preKeydownBehavior, keyDef, element, options, state);\n\n  const unpreventedDefault = _dom.fireEvent.keyDown(element, (0, _getEventProps.getKeyEventProps)(keyDef, state));\n\n  state.pressed.push({\n    keyDef,\n    unpreventedDefault\n  });\n\n  if (unpreventedDefault) {\n    // all default behavior like keypress/submit etc is applied to the currentElement\n    applyPlugins(plugins.keydownBehavior, keyDef, getCurrentElement(), options, state);\n  }\n\n  return unpreventedDefault;\n}\n\nfunction keypress(keyDef, getCurrentElement, options, state) {\n  const element = getCurrentElement();\n\n  const unpreventedDefault = _dom.fireEvent.keyPress(element, (0, _getEventProps.getKeyEventProps)(keyDef, state));\n\n  if (unpreventedDefault) {\n    applyPlugins(plugins.keypressBehavior, keyDef, getCurrentElement(), options, state);\n  }\n}\n\nfunction keyup(keyDef, getCurrentElement, options, state, unprevented) {\n  const element = getCurrentElement();\n  applyPlugins(plugins.preKeyupBehavior, keyDef, element, options, state);\n\n  const unpreventedDefault = _dom.fireEvent.keyUp(element, (0, _getEventProps.getKeyEventProps)(keyDef, state));\n\n  if (unprevented && unpreventedDefault) {\n    applyPlugins(plugins.keyupBehavior, keyDef, getCurrentElement(), options, state);\n  }\n\n  state.pressed = state.pressed.filter(k => k.keyDef !== keyDef);\n  applyPlugins(plugins.postKeyupBehavior, keyDef, element, options, state);\n}\n\nfunction applyPlugins(pluginCollection, keyDef, element, options, state) {\n  const plugin = pluginCollection.find(p => p.matches(keyDef, element, options, state));\n\n  if (plugin) {\n    plugin.handle(keyDef, element, options, state);\n  }\n\n  return !!plugin;\n}\n\nfunction hasKeyPress(keyDef, state) {\n  var _keyDef$key;\n\n  return (((_keyDef$key = keyDef.key) == null ? void 0 : _keyDef$key.length) === 1 || keyDef.key === 'Enter') && !state.modifiers.ctrl && !state.modifiers.alt;\n}"]},"metadata":{},"sourceType":"script"}