{"ast":null,"code":"/**\n * implements https://w3c.github.io/accname/\n */\nimport ArrayFrom from \"./polyfills/array.from.mjs\";\nimport SetLike from \"./polyfills/SetLike.mjs\";\nimport { hasAnyConcreteRoles, isElement, isHTMLTableCaptionElement, isHTMLInputElement, isHTMLSelectElement, isHTMLTextAreaElement, safeWindow, isHTMLFieldSetElement, isHTMLLegendElement, isHTMLOptGroupElement, isHTMLTableElement, isHTMLSlotElement, isSVGSVGElement, isSVGTitleElement, queryIdRefs, getLocalName } from \"./util.mjs\";\n/**\n *  A string of characters where all carriage returns, newlines, tabs, and form-feeds are replaced with a single space, and multiple spaces are reduced to a single space. The string contains only character data; it does not contain any markup.\n */\n\n/**\n *\n * @param {string} string -\n * @returns {FlatString} -\n */\n\nfunction asFlatString(s) {\n  return s.trim().replace(/\\s\\s+/g, \" \");\n}\n/**\n *\n * @param node -\n * @param options - These are not optional to prevent accidentally calling it without options in `computeAccessibleName`\n * @returns {boolean} -\n */\n\n\nfunction isHidden(node, getComputedStyleImplementation) {\n  if (!isElement(node)) {\n    return false;\n  }\n\n  if (node.hasAttribute(\"hidden\") || node.getAttribute(\"aria-hidden\") === \"true\") {\n    return true;\n  }\n\n  var style = getComputedStyleImplementation(node);\n  return style.getPropertyValue(\"display\") === \"none\" || style.getPropertyValue(\"visibility\") === \"hidden\";\n}\n/**\n * @param {Node} node -\n * @returns {boolean} - As defined in step 2E of https://w3c.github.io/accname/#mapping_additional_nd_te\n */\n\n\nfunction isControl(node) {\n  return hasAnyConcreteRoles(node, [\"button\", \"combobox\", \"listbox\", \"textbox\"]) || hasAbstractRole(node, \"range\");\n}\n\nfunction hasAbstractRole(node, role) {\n  if (!isElement(node)) {\n    return false;\n  }\n\n  switch (role) {\n    case \"range\":\n      return hasAnyConcreteRoles(node, [\"meter\", \"progressbar\", \"scrollbar\", \"slider\", \"spinbutton\"]);\n\n    default:\n      throw new TypeError(\"No knowledge about abstract role '\".concat(role, \"'. This is likely a bug :(\"));\n  }\n}\n/**\n * element.querySelectorAll but also considers owned tree\n * @param element\n * @param selectors\n */\n\n\nfunction querySelectorAllSubtree(element, selectors) {\n  var elements = ArrayFrom(element.querySelectorAll(selectors));\n  queryIdRefs(element, \"aria-owns\").forEach(function (root) {\n    // babel transpiles this assuming an iterator\n    elements.push.apply(elements, ArrayFrom(root.querySelectorAll(selectors)));\n  });\n  return elements;\n}\n\nfunction querySelectedOptions(listbox) {\n  if (isHTMLSelectElement(listbox)) {\n    // IE11 polyfill\n    return listbox.selectedOptions || querySelectorAllSubtree(listbox, \"[selected]\");\n  }\n\n  return querySelectorAllSubtree(listbox, '[aria-selected=\"true\"]');\n}\n\nfunction isMarkedPresentational(node) {\n  return hasAnyConcreteRoles(node, [\"none\", \"presentation\"]);\n}\n/**\n * Elements specifically listed in html-aam\n *\n * We don't need this for `label` or `legend` elements.\n * Their implicit roles already allow \"naming from content\".\n *\n * sources:\n *\n * - https://w3c.github.io/html-aam/#table-element\n */\n\n\nfunction isNativeHostLanguageTextAlternativeElement(node) {\n  return isHTMLTableCaptionElement(node);\n}\n/**\n * https://w3c.github.io/aria/#namefromcontent\n */\n\n\nfunction allowsNameFromContent(node) {\n  return hasAnyConcreteRoles(node, [\"button\", \"cell\", \"checkbox\", \"columnheader\", \"gridcell\", \"heading\", \"label\", \"legend\", \"link\", \"menuitem\", \"menuitemcheckbox\", \"menuitemradio\", \"option\", \"radio\", \"row\", \"rowheader\", \"switch\", \"tab\", \"tooltip\", \"treeitem\"]);\n}\n/**\n * TODO https://github.com/eps1lon/dom-accessibility-api/issues/100\n */\n\n\nfunction isDescendantOfNativeHostLanguageTextAlternativeElement( // eslint-disable-next-line @typescript-eslint/no-unused-vars -- not implemented yet\nnode) {\n  return false;\n}\n/**\n * TODO https://github.com/eps1lon/dom-accessibility-api/issues/101\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars -- not implemented yet\n\n\nfunction computeTooltipAttributeValue(node) {\n  return null;\n}\n\nfunction getValueOfTextbox(element) {\n  if (isHTMLInputElement(element) || isHTMLTextAreaElement(element)) {\n    return element.value;\n  } // https://github.com/eps1lon/dom-accessibility-api/issues/4\n\n\n  return element.textContent || \"\";\n}\n\nfunction getTextualContent(declaration) {\n  var content = declaration.getPropertyValue(\"content\");\n\n  if (/^[\"'].*[\"']$/.test(content)) {\n    return content.slice(1, -1);\n  }\n\n  return \"\";\n}\n/**\n * https://html.spec.whatwg.org/multipage/forms.html#category-label\n * TODO: form-associated custom elements\n * @param element\n */\n\n\nfunction isLabelableElement(element) {\n  var localName = getLocalName(element);\n  return localName === \"button\" || localName === \"input\" && element.getAttribute(\"type\") !== \"hidden\" || localName === \"meter\" || localName === \"output\" || localName === \"progress\" || localName === \"select\" || localName === \"textarea\";\n}\n/**\n * > [...], then the first such descendant in tree order is the label element's labeled control.\n * -- https://html.spec.whatwg.org/multipage/forms.html#labeled-control\n * @param element\n */\n\n\nfunction findLabelableElement(element) {\n  if (isLabelableElement(element)) {\n    return element;\n  }\n\n  var labelableElement = null;\n  element.childNodes.forEach(function (childNode) {\n    if (labelableElement === null && isElement(childNode)) {\n      var descendantLabelableElement = findLabelableElement(childNode);\n\n      if (descendantLabelableElement !== null) {\n        labelableElement = descendantLabelableElement;\n      }\n    }\n  });\n  return labelableElement;\n}\n/**\n * Polyfill of HTMLLabelElement.control\n * https://html.spec.whatwg.org/multipage/forms.html#labeled-control\n * @param label\n */\n\n\nfunction getControlOfLabel(label) {\n  if (label.control !== undefined) {\n    return label.control;\n  }\n\n  var htmlFor = label.getAttribute(\"for\");\n\n  if (htmlFor !== null) {\n    return label.ownerDocument.getElementById(htmlFor);\n  }\n\n  return findLabelableElement(label);\n}\n/**\n * Polyfill of HTMLInputElement.labels\n * https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/labels\n * @param element\n */\n\n\nfunction getLabels(element) {\n  var labelsProperty = element.labels;\n\n  if (labelsProperty === null) {\n    return labelsProperty;\n  }\n\n  if (labelsProperty !== undefined) {\n    return ArrayFrom(labelsProperty);\n  } // polyfill\n\n\n  if (!isLabelableElement(element)) {\n    return null;\n  }\n\n  var document = element.ownerDocument;\n  return ArrayFrom(document.querySelectorAll(\"label\")).filter(function (label) {\n    return getControlOfLabel(label) === element;\n  });\n}\n/**\n * Gets the contents of a slot used for computing the accname\n * @param slot\n */\n\n\nfunction getSlotContents(slot) {\n  // Computing the accessible name for elements containing slots is not\n  // currently defined in the spec. This implementation reflects the\n  // behavior of NVDA 2020.2/Firefox 81 and iOS VoiceOver/Safari 13.6.\n  var assignedNodes = slot.assignedNodes();\n\n  if (assignedNodes.length === 0) {\n    // if no nodes are assigned to the slot, it displays the default content\n    return ArrayFrom(slot.childNodes);\n  }\n\n  return assignedNodes;\n}\n/**\n * implements https://w3c.github.io/accname/#mapping_additional_nd_te\n * @param root\n * @param options\n * @returns\n */\n\n\nexport function computeTextAlternative(root) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var consultedNodes = new SetLike();\n  var window = safeWindow(root);\n  var _options$compute = options.compute,\n      compute = _options$compute === void 0 ? \"name\" : _options$compute,\n      _options$computedStyl = options.computedStyleSupportsPseudoElements,\n      computedStyleSupportsPseudoElements = _options$computedStyl === void 0 ? options.getComputedStyle !== undefined : _options$computedStyl,\n      _options$getComputedS = options.getComputedStyle,\n      getComputedStyle = _options$getComputedS === void 0 ? window.getComputedStyle.bind(window) : _options$getComputedS,\n      _options$hidden = options.hidden,\n      hidden = _options$hidden === void 0 ? false : _options$hidden; // 2F.i\n\n  function computeMiscTextAlternative(node, context) {\n    var accumulatedText = \"\";\n\n    if (isElement(node) && computedStyleSupportsPseudoElements) {\n      var pseudoBefore = getComputedStyle(node, \"::before\");\n      var beforeContent = getTextualContent(pseudoBefore);\n      accumulatedText = \"\".concat(beforeContent, \" \").concat(accumulatedText);\n    } // FIXME: Including aria-owns is not defined in the spec\n    // But it is required in the web-platform-test\n\n\n    var childNodes = isHTMLSlotElement(node) ? getSlotContents(node) : ArrayFrom(node.childNodes).concat(queryIdRefs(node, \"aria-owns\"));\n    childNodes.forEach(function (child) {\n      var result = computeTextAlternative(child, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false,\n        recursion: true\n      }); // TODO: Unclear why display affects delimiter\n      // see https://github.com/w3c/accname/issues/3\n\n      var display = isElement(child) ? getComputedStyle(child).getPropertyValue(\"display\") : \"inline\";\n      var separator = display !== \"inline\" ? \" \" : \"\"; // trailing separator for wpt tests\n\n      accumulatedText += \"\".concat(separator).concat(result).concat(separator);\n    });\n\n    if (isElement(node) && computedStyleSupportsPseudoElements) {\n      var pseudoAfter = getComputedStyle(node, \"::after\");\n      var afterContent = getTextualContent(pseudoAfter);\n      accumulatedText = \"\".concat(accumulatedText, \" \").concat(afterContent);\n    }\n\n    return accumulatedText.trim();\n  }\n\n  function computeElementTextAlternative(node) {\n    if (!isElement(node)) {\n      return null;\n    }\n    /**\n     *\n     * @param element\n     * @param attributeName\n     * @returns A string non-empty string or `null`\n     */\n\n\n    function useAttribute(element, attributeName) {\n      var attribute = element.getAttributeNode(attributeName);\n\n      if (attribute !== null && !consultedNodes.has(attribute) && attribute.value.trim() !== \"\") {\n        consultedNodes.add(attribute);\n        return attribute.value;\n      }\n\n      return null;\n    } // https://w3c.github.io/html-aam/#fieldset-and-legend-elements\n\n\n    if (isHTMLFieldSetElement(node)) {\n      consultedNodes.add(node);\n      var children = ArrayFrom(node.childNodes);\n\n      for (var i = 0; i < children.length; i += 1) {\n        var child = children[i];\n\n        if (isHTMLLegendElement(child)) {\n          return computeTextAlternative(child, {\n            isEmbeddedInLabel: false,\n            isReferenced: false,\n            recursion: false\n          });\n        }\n      }\n    } else if (isHTMLTableElement(node)) {\n      // https://w3c.github.io/html-aam/#table-element\n      consultedNodes.add(node);\n\n      var _children = ArrayFrom(node.childNodes);\n\n      for (var _i = 0; _i < _children.length; _i += 1) {\n        var _child = _children[_i];\n\n        if (isHTMLTableCaptionElement(_child)) {\n          return computeTextAlternative(_child, {\n            isEmbeddedInLabel: false,\n            isReferenced: false,\n            recursion: false\n          });\n        }\n      }\n    } else if (isSVGSVGElement(node)) {\n      // https://www.w3.org/TR/svg-aam-1.0/\n      consultedNodes.add(node);\n\n      var _children2 = ArrayFrom(node.childNodes);\n\n      for (var _i2 = 0; _i2 < _children2.length; _i2 += 1) {\n        var _child2 = _children2[_i2];\n\n        if (isSVGTitleElement(_child2)) {\n          return _child2.textContent;\n        }\n      }\n\n      return null;\n    } else if (getLocalName(node) === \"img\" || getLocalName(node) === \"area\") {\n      // https://w3c.github.io/html-aam/#area-element\n      // https://w3c.github.io/html-aam/#img-element\n      var nameFromAlt = useAttribute(node, \"alt\");\n\n      if (nameFromAlt !== null) {\n        return nameFromAlt;\n      }\n    } else if (isHTMLOptGroupElement(node)) {\n      var nameFromLabel = useAttribute(node, \"label\");\n\n      if (nameFromLabel !== null) {\n        return nameFromLabel;\n      }\n    }\n\n    if (isHTMLInputElement(node) && (node.type === \"button\" || node.type === \"submit\" || node.type === \"reset\")) {\n      // https://w3c.github.io/html-aam/#input-type-text-input-type-password-input-type-search-input-type-tel-input-type-email-input-type-url-and-textarea-element-accessible-description-computation\n      var nameFromValue = useAttribute(node, \"value\");\n\n      if (nameFromValue !== null) {\n        return nameFromValue;\n      } // TODO: l10n\n\n\n      if (node.type === \"submit\") {\n        return \"Submit\";\n      } // TODO: l10n\n\n\n      if (node.type === \"reset\") {\n        return \"Reset\";\n      }\n    }\n\n    var labels = getLabels(node);\n\n    if (labels !== null && labels.length !== 0) {\n      consultedNodes.add(node);\n      return ArrayFrom(labels).map(function (element) {\n        return computeTextAlternative(element, {\n          isEmbeddedInLabel: true,\n          isReferenced: false,\n          recursion: true\n        });\n      }).filter(function (label) {\n        return label.length > 0;\n      }).join(\" \");\n    } // https://w3c.github.io/html-aam/#input-type-image-accessible-name-computation\n    // TODO: wpt test consider label elements but html-aam does not mention them\n    // We follow existing implementations over spec\n\n\n    if (isHTMLInputElement(node) && node.type === \"image\") {\n      var _nameFromAlt = useAttribute(node, \"alt\");\n\n      if (_nameFromAlt !== null) {\n        return _nameFromAlt;\n      }\n\n      var nameFromTitle = useAttribute(node, \"title\");\n\n      if (nameFromTitle !== null) {\n        return nameFromTitle;\n      } // TODO: l10n\n\n\n      return \"Submit Query\";\n    }\n\n    if (hasAnyConcreteRoles(node, [\"button\"])) {\n      // https://www.w3.org/TR/html-aam-1.0/#button-element\n      var nameFromSubTree = computeMiscTextAlternative(node, {\n        isEmbeddedInLabel: false,\n        isReferenced: false\n      });\n\n      if (nameFromSubTree !== \"\") {\n        return nameFromSubTree;\n      }\n\n      return useAttribute(node, \"title\");\n    }\n\n    return useAttribute(node, \"title\");\n  }\n\n  function computeTextAlternative(current, context) {\n    if (consultedNodes.has(current)) {\n      return \"\";\n    } // 2A\n\n\n    if (!hidden && isHidden(current, getComputedStyle) && !context.isReferenced) {\n      consultedNodes.add(current);\n      return \"\";\n    } // 2B\n\n\n    var labelElements = queryIdRefs(current, \"aria-labelledby\");\n\n    if (compute === \"name\" && !context.isReferenced && labelElements.length > 0) {\n      return labelElements.map(function (element) {\n        return computeTextAlternative(element, {\n          isEmbeddedInLabel: context.isEmbeddedInLabel,\n          isReferenced: true,\n          // thais isn't recursion as specified, otherwise we would skip\n          // `aria-label` in\n          // <input id=\"myself\" aria-label=\"foo\" aria-labelledby=\"myself\"\n          recursion: false\n        });\n      }).join(\" \");\n    } // 2C\n    // Changed from the spec in anticipation of https://github.com/w3c/accname/issues/64\n    // spec says we should only consider skipping if we have a non-empty label\n\n\n    var skipToStep2E = context.recursion && isControl(current) && compute === \"name\";\n\n    if (!skipToStep2E) {\n      var ariaLabel = (isElement(current) && current.getAttribute(\"aria-label\") || \"\").trim();\n\n      if (ariaLabel !== \"\" && compute === \"name\") {\n        consultedNodes.add(current);\n        return ariaLabel;\n      } // 2D\n\n\n      if (!isMarkedPresentational(current)) {\n        var elementTextAlternative = computeElementTextAlternative(current);\n\n        if (elementTextAlternative !== null) {\n          consultedNodes.add(current);\n          return elementTextAlternative;\n        }\n      }\n    } // special casing, cheating to make tests pass\n    // https://github.com/w3c/accname/issues/67\n\n\n    if (hasAnyConcreteRoles(current, [\"menu\"])) {\n      consultedNodes.add(current);\n      return \"\";\n    } // 2E\n\n\n    if (skipToStep2E || context.isEmbeddedInLabel || context.isReferenced) {\n      if (hasAnyConcreteRoles(current, [\"combobox\", \"listbox\"])) {\n        consultedNodes.add(current);\n        var selectedOptions = querySelectedOptions(current);\n\n        if (selectedOptions.length === 0) {\n          // defined per test `name_heading_combobox`\n          return isHTMLInputElement(current) ? current.value : \"\";\n        }\n\n        return ArrayFrom(selectedOptions).map(function (selectedOption) {\n          return computeTextAlternative(selectedOption, {\n            isEmbeddedInLabel: context.isEmbeddedInLabel,\n            isReferenced: false,\n            recursion: true\n          });\n        }).join(\" \");\n      }\n\n      if (hasAbstractRole(current, \"range\")) {\n        consultedNodes.add(current);\n\n        if (current.hasAttribute(\"aria-valuetext\")) {\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- safe due to hasAttribute guard\n          return current.getAttribute(\"aria-valuetext\");\n        }\n\n        if (current.hasAttribute(\"aria-valuenow\")) {\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- safe due to hasAttribute guard\n          return current.getAttribute(\"aria-valuenow\");\n        } // Otherwise, use the value as specified by a host language attribute.\n\n\n        return current.getAttribute(\"value\") || \"\";\n      }\n\n      if (hasAnyConcreteRoles(current, [\"textbox\"])) {\n        consultedNodes.add(current);\n        return getValueOfTextbox(current);\n      }\n    } // 2F: https://w3c.github.io/accname/#step2F\n\n\n    if (allowsNameFromContent(current) || isElement(current) && context.isReferenced || isNativeHostLanguageTextAlternativeElement(current) || isDescendantOfNativeHostLanguageTextAlternativeElement(current)) {\n      consultedNodes.add(current);\n      return computeMiscTextAlternative(current, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false\n      });\n    }\n\n    if (current.nodeType === current.TEXT_NODE) {\n      consultedNodes.add(current);\n      return current.textContent || \"\";\n    }\n\n    if (context.recursion) {\n      consultedNodes.add(current);\n      return computeMiscTextAlternative(current, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false\n      });\n    }\n\n    var tooltipAttributeValue = computeTooltipAttributeValue(current);\n\n    if (tooltipAttributeValue !== null) {\n      consultedNodes.add(current);\n      return tooltipAttributeValue;\n    } // TODO should this be reachable?\n\n\n    consultedNodes.add(current);\n    return \"\";\n  }\n\n  return asFlatString(computeTextAlternative(root, {\n    isEmbeddedInLabel: false,\n    // by spec computeAccessibleDescription starts with the referenced elements as roots\n    isReferenced: compute === \"description\",\n    recursion: false\n  }));\n} //# sourceMappingURL=accessible-name-and-description.mjs.map","map":{"version":3,"names":["ArrayFrom","SetLike","hasAnyConcreteRoles","isElement","isHTMLTableCaptionElement","isHTMLInputElement","isHTMLSelectElement","isHTMLTextAreaElement","safeWindow","isHTMLFieldSetElement","isHTMLLegendElement","isHTMLOptGroupElement","isHTMLTableElement","isHTMLSlotElement","isSVGSVGElement","isSVGTitleElement","queryIdRefs","getLocalName","asFlatString","s","trim","replace","isHidden","node","getComputedStyleImplementation","hasAttribute","getAttribute","style","getPropertyValue","isControl","hasAbstractRole","role","TypeError","concat","querySelectorAllSubtree","element","selectors","elements","querySelectorAll","forEach","root","push","apply","querySelectedOptions","listbox","selectedOptions","isMarkedPresentational","isNativeHostLanguageTextAlternativeElement","allowsNameFromContent","isDescendantOfNativeHostLanguageTextAlternativeElement","computeTooltipAttributeValue","getValueOfTextbox","value","textContent","getTextualContent","declaration","content","test","slice","isLabelableElement","localName","findLabelableElement","labelableElement","childNodes","childNode","descendantLabelableElement","getControlOfLabel","label","control","undefined","htmlFor","ownerDocument","getElementById","getLabels","labelsProperty","labels","document","filter","getSlotContents","slot","assignedNodes","length","computeTextAlternative","options","arguments","consultedNodes","window","_options$compute","compute","_options$computedStyl","computedStyleSupportsPseudoElements","getComputedStyle","_options$getComputedS","bind","_options$hidden","hidden","computeMiscTextAlternative","context","accumulatedText","pseudoBefore","beforeContent","child","result","isEmbeddedInLabel","isReferenced","recursion","display","separator","pseudoAfter","afterContent","computeElementTextAlternative","useAttribute","attributeName","attribute","getAttributeNode","has","add","children","i","_children","_i","_child","_children2","_i2","_child2","nameFromAlt","nameFromLabel","type","nameFromValue","map","join","_nameFromAlt","nameFromTitle","nameFromSubTree","current","labelElements","skipToStep2E","ariaLabel","elementTextAlternative","selectedOption","nodeType","TEXT_NODE","tooltipAttributeValue"],"sources":["/Users/ilze/Documents/git/ng-iz/node_modules/dom-accessibility-api/dist/accessible-name-and-description.mjs"],"sourcesContent":["/**\n * implements https://w3c.github.io/accname/\n */\nimport ArrayFrom from \"./polyfills/array.from.mjs\";\nimport SetLike from \"./polyfills/SetLike.mjs\";\nimport { hasAnyConcreteRoles, isElement, isHTMLTableCaptionElement, isHTMLInputElement, isHTMLSelectElement, isHTMLTextAreaElement, safeWindow, isHTMLFieldSetElement, isHTMLLegendElement, isHTMLOptGroupElement, isHTMLTableElement, isHTMLSlotElement, isSVGSVGElement, isSVGTitleElement, queryIdRefs, getLocalName } from \"./util.mjs\";\n/**\n *  A string of characters where all carriage returns, newlines, tabs, and form-feeds are replaced with a single space, and multiple spaces are reduced to a single space. The string contains only character data; it does not contain any markup.\n */\n\n/**\n *\n * @param {string} string -\n * @returns {FlatString} -\n */\nfunction asFlatString(s) {\n  return s.trim().replace(/\\s\\s+/g, \" \");\n}\n/**\n *\n * @param node -\n * @param options - These are not optional to prevent accidentally calling it without options in `computeAccessibleName`\n * @returns {boolean} -\n */\n\n\nfunction isHidden(node, getComputedStyleImplementation) {\n  if (!isElement(node)) {\n    return false;\n  }\n\n  if (node.hasAttribute(\"hidden\") || node.getAttribute(\"aria-hidden\") === \"true\") {\n    return true;\n  }\n\n  var style = getComputedStyleImplementation(node);\n  return style.getPropertyValue(\"display\") === \"none\" || style.getPropertyValue(\"visibility\") === \"hidden\";\n}\n/**\n * @param {Node} node -\n * @returns {boolean} - As defined in step 2E of https://w3c.github.io/accname/#mapping_additional_nd_te\n */\n\n\nfunction isControl(node) {\n  return hasAnyConcreteRoles(node, [\"button\", \"combobox\", \"listbox\", \"textbox\"]) || hasAbstractRole(node, \"range\");\n}\n\nfunction hasAbstractRole(node, role) {\n  if (!isElement(node)) {\n    return false;\n  }\n\n  switch (role) {\n    case \"range\":\n      return hasAnyConcreteRoles(node, [\"meter\", \"progressbar\", \"scrollbar\", \"slider\", \"spinbutton\"]);\n\n    default:\n      throw new TypeError(\"No knowledge about abstract role '\".concat(role, \"'. This is likely a bug :(\"));\n  }\n}\n/**\n * element.querySelectorAll but also considers owned tree\n * @param element\n * @param selectors\n */\n\n\nfunction querySelectorAllSubtree(element, selectors) {\n  var elements = ArrayFrom(element.querySelectorAll(selectors));\n  queryIdRefs(element, \"aria-owns\").forEach(function (root) {\n    // babel transpiles this assuming an iterator\n    elements.push.apply(elements, ArrayFrom(root.querySelectorAll(selectors)));\n  });\n  return elements;\n}\n\nfunction querySelectedOptions(listbox) {\n  if (isHTMLSelectElement(listbox)) {\n    // IE11 polyfill\n    return listbox.selectedOptions || querySelectorAllSubtree(listbox, \"[selected]\");\n  }\n\n  return querySelectorAllSubtree(listbox, '[aria-selected=\"true\"]');\n}\n\nfunction isMarkedPresentational(node) {\n  return hasAnyConcreteRoles(node, [\"none\", \"presentation\"]);\n}\n/**\n * Elements specifically listed in html-aam\n *\n * We don't need this for `label` or `legend` elements.\n * Their implicit roles already allow \"naming from content\".\n *\n * sources:\n *\n * - https://w3c.github.io/html-aam/#table-element\n */\n\n\nfunction isNativeHostLanguageTextAlternativeElement(node) {\n  return isHTMLTableCaptionElement(node);\n}\n/**\n * https://w3c.github.io/aria/#namefromcontent\n */\n\n\nfunction allowsNameFromContent(node) {\n  return hasAnyConcreteRoles(node, [\"button\", \"cell\", \"checkbox\", \"columnheader\", \"gridcell\", \"heading\", \"label\", \"legend\", \"link\", \"menuitem\", \"menuitemcheckbox\", \"menuitemradio\", \"option\", \"radio\", \"row\", \"rowheader\", \"switch\", \"tab\", \"tooltip\", \"treeitem\"]);\n}\n/**\n * TODO https://github.com/eps1lon/dom-accessibility-api/issues/100\n */\n\n\nfunction isDescendantOfNativeHostLanguageTextAlternativeElement( // eslint-disable-next-line @typescript-eslint/no-unused-vars -- not implemented yet\nnode) {\n  return false;\n}\n/**\n * TODO https://github.com/eps1lon/dom-accessibility-api/issues/101\n */\n// eslint-disable-next-line @typescript-eslint/no-unused-vars -- not implemented yet\n\n\nfunction computeTooltipAttributeValue(node) {\n  return null;\n}\n\nfunction getValueOfTextbox(element) {\n  if (isHTMLInputElement(element) || isHTMLTextAreaElement(element)) {\n    return element.value;\n  } // https://github.com/eps1lon/dom-accessibility-api/issues/4\n\n\n  return element.textContent || \"\";\n}\n\nfunction getTextualContent(declaration) {\n  var content = declaration.getPropertyValue(\"content\");\n\n  if (/^[\"'].*[\"']$/.test(content)) {\n    return content.slice(1, -1);\n  }\n\n  return \"\";\n}\n/**\n * https://html.spec.whatwg.org/multipage/forms.html#category-label\n * TODO: form-associated custom elements\n * @param element\n */\n\n\nfunction isLabelableElement(element) {\n  var localName = getLocalName(element);\n  return localName === \"button\" || localName === \"input\" && element.getAttribute(\"type\") !== \"hidden\" || localName === \"meter\" || localName === \"output\" || localName === \"progress\" || localName === \"select\" || localName === \"textarea\";\n}\n/**\n * > [...], then the first such descendant in tree order is the label element's labeled control.\n * -- https://html.spec.whatwg.org/multipage/forms.html#labeled-control\n * @param element\n */\n\n\nfunction findLabelableElement(element) {\n  if (isLabelableElement(element)) {\n    return element;\n  }\n\n  var labelableElement = null;\n  element.childNodes.forEach(function (childNode) {\n    if (labelableElement === null && isElement(childNode)) {\n      var descendantLabelableElement = findLabelableElement(childNode);\n\n      if (descendantLabelableElement !== null) {\n        labelableElement = descendantLabelableElement;\n      }\n    }\n  });\n  return labelableElement;\n}\n/**\n * Polyfill of HTMLLabelElement.control\n * https://html.spec.whatwg.org/multipage/forms.html#labeled-control\n * @param label\n */\n\n\nfunction getControlOfLabel(label) {\n  if (label.control !== undefined) {\n    return label.control;\n  }\n\n  var htmlFor = label.getAttribute(\"for\");\n\n  if (htmlFor !== null) {\n    return label.ownerDocument.getElementById(htmlFor);\n  }\n\n  return findLabelableElement(label);\n}\n/**\n * Polyfill of HTMLInputElement.labels\n * https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/labels\n * @param element\n */\n\n\nfunction getLabels(element) {\n  var labelsProperty = element.labels;\n\n  if (labelsProperty === null) {\n    return labelsProperty;\n  }\n\n  if (labelsProperty !== undefined) {\n    return ArrayFrom(labelsProperty);\n  } // polyfill\n\n\n  if (!isLabelableElement(element)) {\n    return null;\n  }\n\n  var document = element.ownerDocument;\n  return ArrayFrom(document.querySelectorAll(\"label\")).filter(function (label) {\n    return getControlOfLabel(label) === element;\n  });\n}\n/**\n * Gets the contents of a slot used for computing the accname\n * @param slot\n */\n\n\nfunction getSlotContents(slot) {\n  // Computing the accessible name for elements containing slots is not\n  // currently defined in the spec. This implementation reflects the\n  // behavior of NVDA 2020.2/Firefox 81 and iOS VoiceOver/Safari 13.6.\n  var assignedNodes = slot.assignedNodes();\n\n  if (assignedNodes.length === 0) {\n    // if no nodes are assigned to the slot, it displays the default content\n    return ArrayFrom(slot.childNodes);\n  }\n\n  return assignedNodes;\n}\n/**\n * implements https://w3c.github.io/accname/#mapping_additional_nd_te\n * @param root\n * @param options\n * @returns\n */\n\n\nexport function computeTextAlternative(root) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var consultedNodes = new SetLike();\n  var window = safeWindow(root);\n  var _options$compute = options.compute,\n      compute = _options$compute === void 0 ? \"name\" : _options$compute,\n      _options$computedStyl = options.computedStyleSupportsPseudoElements,\n      computedStyleSupportsPseudoElements = _options$computedStyl === void 0 ? options.getComputedStyle !== undefined : _options$computedStyl,\n      _options$getComputedS = options.getComputedStyle,\n      getComputedStyle = _options$getComputedS === void 0 ? window.getComputedStyle.bind(window) : _options$getComputedS,\n      _options$hidden = options.hidden,\n      hidden = _options$hidden === void 0 ? false : _options$hidden; // 2F.i\n\n  function computeMiscTextAlternative(node, context) {\n    var accumulatedText = \"\";\n\n    if (isElement(node) && computedStyleSupportsPseudoElements) {\n      var pseudoBefore = getComputedStyle(node, \"::before\");\n      var beforeContent = getTextualContent(pseudoBefore);\n      accumulatedText = \"\".concat(beforeContent, \" \").concat(accumulatedText);\n    } // FIXME: Including aria-owns is not defined in the spec\n    // But it is required in the web-platform-test\n\n\n    var childNodes = isHTMLSlotElement(node) ? getSlotContents(node) : ArrayFrom(node.childNodes).concat(queryIdRefs(node, \"aria-owns\"));\n    childNodes.forEach(function (child) {\n      var result = computeTextAlternative(child, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false,\n        recursion: true\n      }); // TODO: Unclear why display affects delimiter\n      // see https://github.com/w3c/accname/issues/3\n\n      var display = isElement(child) ? getComputedStyle(child).getPropertyValue(\"display\") : \"inline\";\n      var separator = display !== \"inline\" ? \" \" : \"\"; // trailing separator for wpt tests\n\n      accumulatedText += \"\".concat(separator).concat(result).concat(separator);\n    });\n\n    if (isElement(node) && computedStyleSupportsPseudoElements) {\n      var pseudoAfter = getComputedStyle(node, \"::after\");\n      var afterContent = getTextualContent(pseudoAfter);\n      accumulatedText = \"\".concat(accumulatedText, \" \").concat(afterContent);\n    }\n\n    return accumulatedText.trim();\n  }\n\n  function computeElementTextAlternative(node) {\n    if (!isElement(node)) {\n      return null;\n    }\n    /**\n     *\n     * @param element\n     * @param attributeName\n     * @returns A string non-empty string or `null`\n     */\n\n\n    function useAttribute(element, attributeName) {\n      var attribute = element.getAttributeNode(attributeName);\n\n      if (attribute !== null && !consultedNodes.has(attribute) && attribute.value.trim() !== \"\") {\n        consultedNodes.add(attribute);\n        return attribute.value;\n      }\n\n      return null;\n    } // https://w3c.github.io/html-aam/#fieldset-and-legend-elements\n\n\n    if (isHTMLFieldSetElement(node)) {\n      consultedNodes.add(node);\n      var children = ArrayFrom(node.childNodes);\n\n      for (var i = 0; i < children.length; i += 1) {\n        var child = children[i];\n\n        if (isHTMLLegendElement(child)) {\n          return computeTextAlternative(child, {\n            isEmbeddedInLabel: false,\n            isReferenced: false,\n            recursion: false\n          });\n        }\n      }\n    } else if (isHTMLTableElement(node)) {\n      // https://w3c.github.io/html-aam/#table-element\n      consultedNodes.add(node);\n\n      var _children = ArrayFrom(node.childNodes);\n\n      for (var _i = 0; _i < _children.length; _i += 1) {\n        var _child = _children[_i];\n\n        if (isHTMLTableCaptionElement(_child)) {\n          return computeTextAlternative(_child, {\n            isEmbeddedInLabel: false,\n            isReferenced: false,\n            recursion: false\n          });\n        }\n      }\n    } else if (isSVGSVGElement(node)) {\n      // https://www.w3.org/TR/svg-aam-1.0/\n      consultedNodes.add(node);\n\n      var _children2 = ArrayFrom(node.childNodes);\n\n      for (var _i2 = 0; _i2 < _children2.length; _i2 += 1) {\n        var _child2 = _children2[_i2];\n\n        if (isSVGTitleElement(_child2)) {\n          return _child2.textContent;\n        }\n      }\n\n      return null;\n    } else if (getLocalName(node) === \"img\" || getLocalName(node) === \"area\") {\n      // https://w3c.github.io/html-aam/#area-element\n      // https://w3c.github.io/html-aam/#img-element\n      var nameFromAlt = useAttribute(node, \"alt\");\n\n      if (nameFromAlt !== null) {\n        return nameFromAlt;\n      }\n    } else if (isHTMLOptGroupElement(node)) {\n      var nameFromLabel = useAttribute(node, \"label\");\n\n      if (nameFromLabel !== null) {\n        return nameFromLabel;\n      }\n    }\n\n    if (isHTMLInputElement(node) && (node.type === \"button\" || node.type === \"submit\" || node.type === \"reset\")) {\n      // https://w3c.github.io/html-aam/#input-type-text-input-type-password-input-type-search-input-type-tel-input-type-email-input-type-url-and-textarea-element-accessible-description-computation\n      var nameFromValue = useAttribute(node, \"value\");\n\n      if (nameFromValue !== null) {\n        return nameFromValue;\n      } // TODO: l10n\n\n\n      if (node.type === \"submit\") {\n        return \"Submit\";\n      } // TODO: l10n\n\n\n      if (node.type === \"reset\") {\n        return \"Reset\";\n      }\n    }\n\n    var labels = getLabels(node);\n\n    if (labels !== null && labels.length !== 0) {\n      consultedNodes.add(node);\n      return ArrayFrom(labels).map(function (element) {\n        return computeTextAlternative(element, {\n          isEmbeddedInLabel: true,\n          isReferenced: false,\n          recursion: true\n        });\n      }).filter(function (label) {\n        return label.length > 0;\n      }).join(\" \");\n    } // https://w3c.github.io/html-aam/#input-type-image-accessible-name-computation\n    // TODO: wpt test consider label elements but html-aam does not mention them\n    // We follow existing implementations over spec\n\n\n    if (isHTMLInputElement(node) && node.type === \"image\") {\n      var _nameFromAlt = useAttribute(node, \"alt\");\n\n      if (_nameFromAlt !== null) {\n        return _nameFromAlt;\n      }\n\n      var nameFromTitle = useAttribute(node, \"title\");\n\n      if (nameFromTitle !== null) {\n        return nameFromTitle;\n      } // TODO: l10n\n\n\n      return \"Submit Query\";\n    }\n\n    if (hasAnyConcreteRoles(node, [\"button\"])) {\n      // https://www.w3.org/TR/html-aam-1.0/#button-element\n      var nameFromSubTree = computeMiscTextAlternative(node, {\n        isEmbeddedInLabel: false,\n        isReferenced: false\n      });\n\n      if (nameFromSubTree !== \"\") {\n        return nameFromSubTree;\n      }\n\n      return useAttribute(node, \"title\");\n    }\n\n    return useAttribute(node, \"title\");\n  }\n\n  function computeTextAlternative(current, context) {\n    if (consultedNodes.has(current)) {\n      return \"\";\n    } // 2A\n\n\n    if (!hidden && isHidden(current, getComputedStyle) && !context.isReferenced) {\n      consultedNodes.add(current);\n      return \"\";\n    } // 2B\n\n\n    var labelElements = queryIdRefs(current, \"aria-labelledby\");\n\n    if (compute === \"name\" && !context.isReferenced && labelElements.length > 0) {\n      return labelElements.map(function (element) {\n        return computeTextAlternative(element, {\n          isEmbeddedInLabel: context.isEmbeddedInLabel,\n          isReferenced: true,\n          // thais isn't recursion as specified, otherwise we would skip\n          // `aria-label` in\n          // <input id=\"myself\" aria-label=\"foo\" aria-labelledby=\"myself\"\n          recursion: false\n        });\n      }).join(\" \");\n    } // 2C\n    // Changed from the spec in anticipation of https://github.com/w3c/accname/issues/64\n    // spec says we should only consider skipping if we have a non-empty label\n\n\n    var skipToStep2E = context.recursion && isControl(current) && compute === \"name\";\n\n    if (!skipToStep2E) {\n      var ariaLabel = (isElement(current) && current.getAttribute(\"aria-label\") || \"\").trim();\n\n      if (ariaLabel !== \"\" && compute === \"name\") {\n        consultedNodes.add(current);\n        return ariaLabel;\n      } // 2D\n\n\n      if (!isMarkedPresentational(current)) {\n        var elementTextAlternative = computeElementTextAlternative(current);\n\n        if (elementTextAlternative !== null) {\n          consultedNodes.add(current);\n          return elementTextAlternative;\n        }\n      }\n    } // special casing, cheating to make tests pass\n    // https://github.com/w3c/accname/issues/67\n\n\n    if (hasAnyConcreteRoles(current, [\"menu\"])) {\n      consultedNodes.add(current);\n      return \"\";\n    } // 2E\n\n\n    if (skipToStep2E || context.isEmbeddedInLabel || context.isReferenced) {\n      if (hasAnyConcreteRoles(current, [\"combobox\", \"listbox\"])) {\n        consultedNodes.add(current);\n        var selectedOptions = querySelectedOptions(current);\n\n        if (selectedOptions.length === 0) {\n          // defined per test `name_heading_combobox`\n          return isHTMLInputElement(current) ? current.value : \"\";\n        }\n\n        return ArrayFrom(selectedOptions).map(function (selectedOption) {\n          return computeTextAlternative(selectedOption, {\n            isEmbeddedInLabel: context.isEmbeddedInLabel,\n            isReferenced: false,\n            recursion: true\n          });\n        }).join(\" \");\n      }\n\n      if (hasAbstractRole(current, \"range\")) {\n        consultedNodes.add(current);\n\n        if (current.hasAttribute(\"aria-valuetext\")) {\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- safe due to hasAttribute guard\n          return current.getAttribute(\"aria-valuetext\");\n        }\n\n        if (current.hasAttribute(\"aria-valuenow\")) {\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- safe due to hasAttribute guard\n          return current.getAttribute(\"aria-valuenow\");\n        } // Otherwise, use the value as specified by a host language attribute.\n\n\n        return current.getAttribute(\"value\") || \"\";\n      }\n\n      if (hasAnyConcreteRoles(current, [\"textbox\"])) {\n        consultedNodes.add(current);\n        return getValueOfTextbox(current);\n      }\n    } // 2F: https://w3c.github.io/accname/#step2F\n\n\n    if (allowsNameFromContent(current) || isElement(current) && context.isReferenced || isNativeHostLanguageTextAlternativeElement(current) || isDescendantOfNativeHostLanguageTextAlternativeElement(current)) {\n      consultedNodes.add(current);\n      return computeMiscTextAlternative(current, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false\n      });\n    }\n\n    if (current.nodeType === current.TEXT_NODE) {\n      consultedNodes.add(current);\n      return current.textContent || \"\";\n    }\n\n    if (context.recursion) {\n      consultedNodes.add(current);\n      return computeMiscTextAlternative(current, {\n        isEmbeddedInLabel: context.isEmbeddedInLabel,\n        isReferenced: false\n      });\n    }\n\n    var tooltipAttributeValue = computeTooltipAttributeValue(current);\n\n    if (tooltipAttributeValue !== null) {\n      consultedNodes.add(current);\n      return tooltipAttributeValue;\n    } // TODO should this be reachable?\n\n\n    consultedNodes.add(current);\n    return \"\";\n  }\n\n  return asFlatString(computeTextAlternative(root, {\n    isEmbeddedInLabel: false,\n    // by spec computeAccessibleDescription starts with the referenced elements as roots\n    isReferenced: compute === \"description\",\n    recursion: false\n  }));\n}\n//# sourceMappingURL=accessible-name-and-description.mjs.map"],"mappings":"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"},"metadata":{},"sourceType":"module"}